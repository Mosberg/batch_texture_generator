{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://mosberg.github.io/schemas/textures/texture-palettes.schema.json",
  "title": "Texture Palettes",
  "description": "Palette/group data used by recolor tooling. Each item defines per-texture palette groups for deterministic palette swapping. Colors are 8-digit RGBA hex (#RRGGBBAA).",
  "type": "object",
  "additionalProperties": false,
  "required": ["schema", "version", "items"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "Optional JSON Schema pointer for editors (recommended for palette JSON files)."
    },
    "schema": { "const": "texture-palettes" },
    "version": {
      "type": "integer",
      "minimum": 1,
      "description": "Schema/data version for forward-compatible tooling."
    },
    "generator": {
      "type": "object",
      "additionalProperties": false,
      "required": ["name", "version"],
      "properties": {
        "name": { "$ref": "common.schema.json#/$defs/nonEmptyString" },
        "version": { "$ref": "common.schema.json#/$defs/semver" }
      },
      "description": "Optional metadata about the tool that produced this palette file."
    },
    "items": {
      "type": "array",
      "minItems": 1,
      "maxItems": 10000,
      "items": { "$ref": "#/$defs/paletteItem" }
    }
  },
  "$defs": {
    "paletteItem": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id", "name", "path", "material", "groups"],
      "properties": {
        "id": { "$ref": "common.schema.json#/$defs/snakeId" },
        "name": { "$ref": "common.schema.json#/$defs/nonEmptyString" },
        "path": { "$ref": "common.schema.json#/$defs/texturePngPath" },
        "material": { "$ref": "common.schema.json#/$defs/materialId" },
        "groups": {
          "type": "object",
          "minProperties": 1,
          "propertyNames": { "$ref": "common.schema.json#/$defs/groupId" },
          "additionalProperties": { "$ref": "#/$defs/paletteGroup" },
          "description": "Group id -> group definition (e.g. base, trim, veins)."
        },
        "metadata": {
          "$ref": "common.schema.json#/$defs/jsonObject",
          "description": "Optional metadata for tooling (notes, tags, provenance)."
        }
      }
    },
    "paletteGroup": {
      "type": "object",
      "additionalProperties": false,
      "required": ["colors"],
      "properties": {
        "colors": {
          "type": "array",
          "minItems": 1,
          "maxItems": 256,
          "uniqueItems": true,
          "items": { "$ref": "common.schema.json#/$defs/hex8" },
          "description": "Ordered palette colors (RGBA). Index mapping is used during recolor."
        },
        "comment": {
          "type": "string",
          "description": "Human notes."
        },
        "metadata": { "$ref": "common.schema.json#/$defs/jsonObject" }
      }
    }
  }
}
